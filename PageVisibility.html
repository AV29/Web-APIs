<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A demo of the W3C Page Visibility API.">
    <title>Demo: Page Visibility API</title>
</head>
<body style="margin: auto; text-align: center;">
<h1>Demo: Page Visibility API</h1>

<main>
    <video id="videoElement" controls>
        <source src="https://s3-ap-northeast-1.amazonaws.com/daniemon/demos/The%2BVillage-Mobile.mp4" type="video/mp4"
                media="all and (max-width:680px)">
        <source src="https://s3-ap-northeast-1.amazonaws.com/daniemon/demos/The%2BVillage-Mobile.webm" type="video/webm"
                media="all and (max-width:680px)">
        <source src="https://s3-ap-northeast-1.amazonaws.com/daniemon/demos/The%2BVillage-SD.mp4" type="video/mp4">
        <source src="https://s3-ap-northeast-1.amazonaws.com/daniemon/demos/The%2BVillage-SD.webm" type="video/webm">
        <p>Sorry, there's a problem playing this video. Please try using a different browser.</p>
    </video>
</main>

<script>


    const videoElement = document.getElementById("videoElement");

    function handleVisibilityChange() {
        if (document.hidden) {
            videoElement.pause();
        } else {
            videoElement.play();
        }
    }

    document.addEventListener('visibilitychange', handleVisibilityChange, false);
    videoElement.addEventListener("pause", function () {
        document.title = 'Paused';
    }, false);
    videoElement.addEventListener("play", function () {
        document.title = 'Playing';
    }, false);


</script>

</body>

</html>